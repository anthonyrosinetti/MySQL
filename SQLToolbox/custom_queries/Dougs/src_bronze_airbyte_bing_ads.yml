version: 2

sources:
  - name: bronze_airbyte_bing_ads
    description: Raw data from Microsoft Ads sent via Airbyte within BigQuery
    database: data-production-398108
    schema: bronze_airbyte_bing_ads
    config:
      freshness:
        warn_after: { count: 24, period: hour }
        error_after: { count: 48, period: hour }
    loaded_at_field: _airbyte_extracted_at

    tables:
      - name: accounts
        description: Attributes of the Microsoft Ads accounts
        columns:
          - name: Id
            description: Identifier of the Microsoft Ads account (required)
            tests:
              - not_null
          - name: Name
            description: Name of the Microsoft Ads account
          - name: CurrencyCode
            description: Currency code of the Microsoft Ads account
            tests:
              - not_null
      - name: ad_groups
        columns:
          - name: AccountId
            description: Identifier of the Microsoft Ads account (required)
            tests:
              - not_null
          - name: CampaignId
            description: Identifier of the Microsoft Ads campaign (required)
            tests:
              - not_null
          - name: Id
            description: Identifier of the Microsoft Ads ad group (required)
            tests:
              - not_null
          - name: Name
            description: Name of the Microsoft Ads ad group
          - name: AdGroupType
            description: Type of the Microsoft Ads ad group
      - name: ad_group_performance_report_daily
        columns:
          - name: TimePeriod
            description: Date of the statistics (required)
            tests:
              - not_null
          - name: AccountId
            description: Identifier of the Microsoft Ads account (required)
            tests:
              - not_null
          - name: CampaignId
            description: Identifier of the Microsoft Ads campaign (required)
            tests:
              - not_null
          - name: AdGroupId
            description: Identifier of the Microsoft Ads ad group (required)
            tests:
              - not_null
          - name: DeviceType
            description: Device type on which the ad interaction happened
          - name: Impressions
            description: Volume of impressions on the specific ad group, device and day
          - name: Clicks
            description: Volume of clicks on the specific ad group, device and day
          - name: Spend
            description: Budget spent on the specific ad group, device and day, in the account currency (see accounts model ; EUR for Dougs)
      - name: ad_performance_report_daily
        columns:
          - name: TimePeriod
            description: Date of the statistics (required)
            tests:
              - not_null
          - name: AccountId
            description: Identifier of the Microsoft Ads account (required)
            tests:
              - not_null
          - name: CampaignId
            description: Identifier of the Microsoft Ads campaign (required)
            tests:
              - not_null
          - name: AdGroupId
            description: Identifier of the Microsoft Ads ad group (required)
            tests:
              - not_null
          - name: AdId
            description: Identifier of the Microsoft Ads ad (required)
            tests:
              - not_null
          - name: AdDescription
            description: Description of the Microsoft Ads ad
          - name: DeviceType
            description: Device type on which the ad interaction happened
          - name: Impressions
            description: Volume of impressions on the specific ad, device and day
          - name: Clicks
            description: Volume of clicks on the specific ad, device and day
          - name: Spend
            description: Budget spent on the specific ad, device and day, in the account currency (see accounts model ; EUR for Dougs)
      - name: campaigns
        columns:
          - name: AccountId
            description: Identifier of the Microsoft Ads account (required)
            tests:
              - not_null
          - name: Id
            description: Identifier of the Microsoft Ads campaign (required)
            tests:
              - not_null
          - name: Name
            description: Name of the Microsoft Ads campaign
          - name: CampaignType
            description: Type of the Microsoft Ads campaign
      - name: campaign_performance_report_daily
        columns:
          - name: TimePeriod
            description: Date of the statistics (required)
            tests:
              - not_null
          - name: AccountId
            description: Identifier of the Microsoft Ads account (required)
            tests:
              - not_null
          - name: CampaignId
            description: Identifier of the Microsoft Ads campaign (required)
            tests:
              - not_null
          - name: DeviceType
            description: Device type on which the ad interaction happened
          - name: Impressions
            description: Volume of impressions on the specific campaign, device and day
          - name: Clicks
            description: Volume of clicks on the specific campaign, device and day
          - name: Spend
            description: Budget spent on the specific campaign, device and day, in the account currency (see accounts model ; EUR for Dougs)
      - name: keyword_performance_report_daily
        columns:
          - name: TimePeriod
            description: Date of the statistics (required)
            tests:
              - not_null
          - name: AccountId
            description: Identifier of the Microsoft Ads account (required)
            tests:
              - not_null
          - name: CampaignId
            description: Identifier of the Microsoft Ads campaign (required)
            tests:
              - not_null
          - name: AdGroupId
            description: Identifier of the Microsoft Ads ad group (required)
            tests:
              - not_null
          - name: AdId
            description: Identifier of the Microsoft Ads ad (required)
            tests:
              - not_null
          - name: KeywordId
            description: Identifier of the Microsoft Ads keyword (required)
            tests:
              - not_null
          - name: Keyword
            description: Name/value/text of the Microsoft Ads keyword (required)
            tests:
              - not_null
          - name: DeviceType
            description: Device type on which the ad interaction happened
          - name: Impressions
            description: Volume of impressions on the specific keyword, device and day
          - name: Clicks
            description: Volume of clicks on the specific keyword, device and day
          - name: Spend
            description: Budget spent on the specific keyword, device and day, in the account currency (see accounts model ; EUR for Dougs)



models:
  - name: stg_bing_ads_accounts
    description: Attributes of the Microsoft Ads accounts
    columns:
      - name: timestamp_last_refresh
        description: Timestamp at which the data was refreshed (required)
        tests:
          - not_null
      - name: account_id
        description: Identifier of the Microsoft Ads account (required)
        tests:
          - not_null
      - name: account_name
        description: Name of the Microsoft Ads account
      - name: account_currency
        description: Currency code of the Microsoft Ads account
        tests:
          - not_null

  - name: stg_bing_ads_ad_groups
    columns:
      - name: timestamp_last_refresh
        description: Timestamp at which the data was refreshed (required)
        tests:
          - not_null
      - name: account_id
        description: Identifier of the Microsoft Ads account (required)
        tests:
          - not_null
      - name: campaign_id
        description: Identifier of the Microsoft Ads campaign (required)
        tests:
          - not_null
      - name: ad_group_id
        description: Identifier of the Microsoft Ads ad group (required)
        tests:
          - not_null
      - name: ad_group_name
        description: Name of the Microsoft Ads ad group
      - name: ad_group_type
        description: Type of the Microsoft Ads ad group

  - name: stg_bing_ads_ad_group_performance_report_daily
    columns:
      - name: timestamp_last_refresh
        description: Timestamp at which the data was refreshed (required)
        tests:
          - not_null
      - name: date_report
        description: Date of the statistics (required)
        tests:
          - not_null
      - name: account_id
        description: Identifier of the Microsoft Ads account (required)
        tests:
          - not_null
      - name: campaign_id
        description: Identifier of the Microsoft Ads campaign (required)
        tests:
          - not_null
      - name: ad_group_id
        description: Identifier of the Microsoft Ads ad group (required)
        tests:
          - not_null
      - name: device_type
        description: Device type on which the ad interaction happened
      - name: impressions
        description: Volume of impressions on the specific ad group, device and day
      - name: clicks
        description: Volume of clicks on the specific ad group, device and day
      - name: spend
        description: Budget spent on the specific ad group, device and day, in the account currency (see accounts model ; EUR for Dougs)

  - name: stg_bing_ads_ad_performance_report_daily
    columns:
      - name: timestamp_last_refresh
        description: Timestamp at which the data was refreshed (required)
        tests:
          - not_null
      - name: date_report
        description: Date of the statistics (required)
        tests:
          - not_null
      - name: account_id
        description: Identifier of the Microsoft Ads account (required)
        tests:
          - not_null
      - name: campaign_id
        description: Identifier of the Microsoft Ads campaign (required)
        tests:
          - not_null
      - name: ad_group_id
        description: Identifier of the Microsoft Ads ad group (required)
        tests:
          - not_null
      - name: ad_id
        description: Identifier of the Microsoft Ads ad (required)
        tests:
          - not_null
      - name: ad_description
        description: Description of the Microsoft Ads ad
      - name: device_type
        description: Device type on which the ad interaction happened
      - name: impressions
        description: Volume of impressions on the specific ad, device and day
      - name: clicks
        description: Volume of clicks on the specific ad, device and day
      - name: spend
        description: Budget spent on the specific ad, device and day, in the account currency (see accounts model ; EUR for Dougs)

  - name: stg_bing_ads_campaigns
    columns:
      - name: timestamp_last_refresh
        description: Timestamp at which the data was refreshed (required)
        tests:
          - not_null
      - name: account_id
        description: Identifier of the Microsoft Ads account (required)
        tests:
          - not_null
      - name: campaign_id
        description: Identifier of the Microsoft Ads campaign (required)
        tests:
          - not_null
      - name: campaign_name
        description: Name of the Microsoft Ads campaign
      - name: campaign_type
        description: Type of the Microsoft Ads campaign

  - name: stg_bing_ads_campaign_performance_report_daily
    columns:
      - name: timestamp_last_refresh
        description: Timestamp at which the data was refreshed (required)
        tests:
          - not_null
      - name: date_report
        description: Date of the statistics (required)
        tests:
          - not_null
      - name: account_id
        description: Identifier of the Microsoft Ads account (required)
        tests:
          - not_null
      - name: campaign_id
        description: Identifier of the Microsoft Ads campaign (required)
        tests:
          - not_null
      - name: device_type
        description: Device type on which the ad interaction happened
      - name: impressions
        description: Volume of impressions on the specific campaign, device and day
      - name: clicks
        description: Volume of clicks on the specific campaign, device and day
      - name: spend
        description: Budget spent on the specific campaign, device and day, in the account currency (see accounts model ; EUR for Dougs)

  - name: stg_bing_ads_keyword_performance_report_daily
    columns:
      - name: timestamp_last_refresh
        description: Timestamp at which the data was refreshed (required)
        tests:
          - not_null
      - name: date_report
        description: Date of the statistics (required)
        tests:
          - not_null
      - name: account_id
        description: Identifier of the Microsoft Ads account (required)
        tests:
          - not_null
      - name: campaign_id
        description: Identifier of the Microsoft Ads campaign (required)
        tests:
          - not_null
      - name: ad_group_id
        description: Identifier of the Microsoft Ads ad group (required)
        tests:
          - not_null
      - name: ad_id
        description: Identifier of the Microsoft Ads ad (required)
        tests:
          - not_null
      - name: keyword_id
        description: Identifier of the Microsoft Ads keyword (required)
        tests:
          - not_null
      - name: keyword_name
        description: Name/value/text of the Microsoft Ads keyword (required)
        tests:
          - not_null
      - name: device_type
        description: Device type on which the ad interaction happened
      - name: impressions
        description: Volume of impressions on the specific keyword, device and day
      - name: clicks
        description: Volume of clicks on the specific keyword, device and day
      - name: spend
        description: Budget spent on the specific keyword, device and day, in the account currency (see accounts model ; EUR for Dougs)
